/**
 * Block: Marquee - Editor Styles
 *
 * Block editor specific styles for the Marquee block. Handles editor-only styling,
 * preview states, and block editor interface integration.
 *
 * @file        blocks/marquee/editor.scss
 * @package     OrbiTools
 * @subpackage  orbitools/blocks
 * @author      OrbiTools Team
 * @since       1.0.0
 * @version     1.0.0
 *
 * @see         blocks/marquee/index.scss - Frontend styles
 */

// Base class for Marquee block in editor
$elem_base: 'orb-marquee';

.#{$elem_base} {
    // Editor-specific overrides for marquee animation
    // Slow down animation in editor for better editing experience
    .#{$elem_base}__wrapper {
        animation-duration: calc(var(--marquee-speed, 10s) * 3) !important;
    }

    // Ensure white space settings are applied in editor
    &:not(.has-child-selected) .#{$elem_base}__content {
        white-space: var(--marquee-white-space, wrap) !important;
        
        // Apply to nested elements as well
        * {
            white-space: inherit !important;
        }
    }

    // Show overlay effects in editor when not selected/highlighted
    &:not(.is-selected, .is-highlighted, .has-child-selected).has-overlay-color {
        position: relative;
        isolation: isolate;
        overflow: hidden;

        // Create overlay gradient effect using pseudo-elements
        &::before,
        &::after {
            pointer-events: none;
            position: absolute;
            content: "";
            z-index: 1;
            inset: 0;
        }

        // Horizontal marquee overlay
        &.#{$elem_base}--x {
            &::before,
            &::after {
                width: 15%;
                height: 100%;
            }

            &::before {
                background: linear-gradient(
                    270deg, 
                    transparent 0%, 
                    var(--marquee-overlay-color, transparent) 100%
                );
                left: 0;
                right: auto;
            }

            &::after {
                background: linear-gradient(
                    90deg, 
                    transparent 0%, 
                    var(--marquee-overlay-color, transparent) 100%
                );
                right: 0;
                left: auto;
            }
        }

        // Vertical marquee overlay
        &.#{$elem_base}--y {
            &::before,
            &::after {
                width: 100%;
                height: 15%;
            }

            &::before {
                background: linear-gradient(
                    0deg, 
                    transparent 0%, 
                    var(--marquee-overlay-color, transparent) 100%
                );
                top: 0;
                bottom: auto;
            }

            &::after {
                background: linear-gradient(
                    180deg, 
                    transparent 0%, 
                    var(--marquee-overlay-color, transparent) 100%
                );
                bottom: 0;
                top: auto;
            }
        }
    }

    // Pause animation when block is selected for better editing
    &.is-selected,
    &.has-child-selected {
        .#{$elem_base}__wrapper {
            animation-play-state: paused !important;
        }
    }

    // Editor preview adjustments
    .block-editor-inner-blocks {
        // Ensure inner blocks are properly contained
        min-width: 0;
        
        // Remove default margins that might interfere with marquee layout
        .block-editor-block-list__layout {
            margin: 0;
        }
    }

    // Style the content area in editor
    .#{$elem_base}__content {
        // Ensure content is visible during editing
        min-width: max-content;
        
        // Make sure appenders are visible
        .block-list-appender {
            display: flex;
            align-items: center;
            margin-left: var(--marquee-gap, 40px);
        }
    }

    // Special handling for vertical orientation in editor
    &.#{$elem_base}--y {
        .#{$elem_base}__content {
            min-height: max-content;
            width: 100%;
            
            .block-list-appender {
                margin-left: 0;
                margin-top: var(--marquee-gap, 40px);
                justify-content: center;
            }
        }
    }
}

// Block editor specific adjustments
.block-editor-block-preview__content {
    .#{$elem_base} {
        // Even slower animation in block preview
        .#{$elem_base}__wrapper {
            animation-duration: calc(var(--marquee-speed, 10s) * 5) !important;
        }
    }
}

// Ensure proper styling in widget editor
.widget-area .#{$elem_base} {
    .#{$elem_base}__wrapper {
        animation-duration: calc(var(--marquee-speed, 10s) * 2);
    }
}