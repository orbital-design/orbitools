/**
 * Block: Query Loop - Frontend Styles
 *
 * Frontend specific styles for the Query Loop block. Handles layout rendering,
 * template styling, and responsive behavior for dynamically generated content.
 *
 * @file        blocks/query-loop/index.scss
 * @package     OrbiTools
 * @subpackage  orbitools/blocks
 * @author      OrbiTools Team
 * @since       1.0.0
 * @version     1.0.0
 *
 * @see         blocks/query-loop/editor.scss - Editor styles
 */

// Base class for Query Loop block
$elem_base: 'orb-query-loop';

.#{$elem_base} {
    width: 100%;
    box-sizing: border-box;

    // =======================
    // Layout Types
    // =======================

    // Grid Layout
    &.#{$elem_base}--grid {
        display: grid;
        gap: var(--wp--style--block-gap, 1.5rem);

        // Grid columns based on data attribute
        &[data-columns="2"] { grid-template-columns: repeat(2, 1fr); }
        &[data-columns="3"] { grid-template-columns: repeat(3, 1fr); }
        &[data-columns="4"] { grid-template-columns: repeat(4, 1fr); }
        &[data-columns="5"] { grid-template-columns: repeat(5, 1fr); }

        // Responsive grid behavior
        @media (max-width: 768px) {
            &[data-columns="3"],
            &[data-columns="4"],
            &[data-columns="5"] {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 480px) {
            &[data-columns="2"],
            &[data-columns="3"],
            &[data-columns="4"],
            &[data-columns="5"] {
                grid-template-columns: 1fr;
            }
        }
    }

    // List Layout
    &.#{$elem_base}--list {
        display: flex;
        flex-direction: column;
        gap: var(--wp--style--block-gap, 1.5rem);
    }

    // =======================
    // Template Support
    // =======================

    // Individual post/item containers
    .#{$elem_base}__item {
        width: 100%;
        box-sizing: border-box;
        
        // Ensure consistent height in grid layouts
        .#{$elem_base}--grid & {
            height: 100%;
        }
    }

    // Template-specific styling
    .#{$elem_base}__template {
        &--default {
            // Default template styling
            .#{$elem_base}__title {
                margin: 0 0 0.5rem 0;
                font-size: 1.25rem;
                line-height: 1.4;

                a {
                    color: inherit;
                    text-decoration: none;

                    &:hover {
                        text-decoration: underline;
                    }
                }
            }

            .#{$elem_base}__excerpt {
                margin: 0;
                color: #666;
                line-height: 1.6;
            }

            .#{$elem_base}__meta {
                margin-top: 1rem;
                font-size: 0.875rem;
                color: #999;
            }
        }

        // Theme templates can override these styles
        // by using more specific selectors
    }

    // =======================
    // Empty States
    // =======================

    .#{$elem_base}__empty {
        padding: 2rem;
        text-align: center;
        color: #666;
        background: #f8f9fa;
        border: 2px dashed #ddd;
        border-radius: 8px;

        .#{$elem_base}__empty-icon {
            font-size: 2rem;
            margin-bottom: 1rem;
            opacity: 0.6;
        }

        .#{$elem_base}__empty-title {
            margin: 0 0 0.5rem 0;
            font-size: 1.125rem;
            font-weight: 600;
            color: #333;
        }

        .#{$elem_base}__empty-description {
            margin: 0 0 1rem 0;
            line-height: 1.6;
        }

        .#{$elem_base}__empty-hint {
            font-size: 0.875rem;
            color: #999;
            font-style: italic;
        }

        // Theme-specific empty state classes
        &.ilkari-query-empty {
            // Custom theme styling can be applied here
            
            &--setup {
                border-color: #007cba;
                background: #f0f6fc;
            }

            &--no-results {
                border-color: #d63638;
                background: #fcf0f1;
            }

            &--minimal {
                background: #fff;
                border-style: solid;
                border-width: 1px;
                padding: 1.5rem;
            }
        }
    }

    // =======================
    // Pagination Support
    // =======================

    .#{$elem_base}__pagination {
        margin-top: 2rem;
        display: flex;
        justify-content: center;
        gap: 0.5rem;

        .page-numbers {
            padding: 0.5rem 0.75rem;
            border: 1px solid #ddd;
            background: #fff;
            color: #333;
            text-decoration: none;
            border-radius: 4px;
            transition: all 0.2s ease;

            &:hover {
                background: #f5f5f5;
                border-color: #999;
            }

            &.current {
                background: #007cba;
                color: #fff;
                border-color: #007cba;
            }

            &.prev,
            &.next {
                font-weight: 600;
            }
        }
    }

    // =======================
    // Frontend Filters & Sorting
    // =======================

    .#{$elem_base}__controls {
        margin-bottom: 1.5rem;
        display: flex;
        flex-wrap: wrap;
        gap: 1rem;
        align-items: center;

        .#{$elem_base}__sort,
        .#{$elem_base}__filter {
            display: flex;
            align-items: center;
            gap: 0.5rem;

            label {
                font-weight: 600;
                font-size: 0.875rem;
                color: #333;
            }

            select {
                padding: 0.375rem 0.75rem;
                border: 1px solid #ddd;
                border-radius: 4px;
                background: #fff;
                font-size: 0.875rem;
            }
        }

        @media (max-width: 768px) {
            flex-direction: column;
            align-items: stretch;

            .#{$elem_base}__sort,
            .#{$elem_base}__filter {
                justify-content: space-between;
            }
        }
    }

    // =======================
    // Loading States
    // =======================

    &.#{$elem_base}--loading {
        opacity: 0.6;
        pointer-events: none;

        .#{$elem_base}__item {
            animation: pulse 1.5s ease-in-out infinite;
        }
    }

    @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
    }

    // =======================
    // Accessibility
    // =======================

    // Ensure proper focus styles for interactive elements
    a, button, select {
        &:focus {
            outline: 2px solid #007cba;
            outline-offset: 2px;
        }
    }

    // Screen reader text for accessibility
    .screen-reader-text {
        clip: rect(1px, 1px, 1px, 1px);
        position: absolute !important;
        height: 1px;
        width: 1px;
        overflow: hidden;
    }
}

// =======================
// Editor-specific Styles
// =======================

.block-editor-block-preview__content {
    .#{$elem_base}__empty {
        // Make empty states more visible in editor
        border-color: #007cba;
        background: #f0f6fc;
    }
}

// Editor placeholder styling
.#{$elem_base}-editor {
    &__icon {
        font-size: 2rem;
        margin-bottom: 0.5rem;
        opacity: 0.7;
    }

    &__text {
        margin: 0 0 0.5rem 0;
        font-weight: 600;
        color: #333;
    }

    &__help {
        margin: 0;
        font-size: 0.875rem;
        color: #666;
        line-height: 1.4;
    }
}